name: esxrocketchat-desktop
version: 0.5.0
summary: Desktop app for ESX.Rocket.Chat
description: ESX.Rocket.Chat Desktop app
apps:
  esxrocketchat:
    command: env TMPDIR=$SNAP_USER_DATA FONTCONFIG_PATH=$SNAP/etc/fonts FONTCONFIG_FILE=$SNAP/etc/fonts/fonts.conf desktop-launch $SNAP/esxrocketchat
    plugs: [unity7, x11, home, opengl, network, network-bind, browser-support]

parts:
  esxrocketchat:
    plugin: copy
    stage-packages:
      - libnss3
      - fontconfig-config
      - gnome-themes-standard
    files:
      node_modules/electron/dist/electron: rocketchat
      node_modules/electron/dist/icudtl.dat: icudtl.dat
      node_modules/electron/dist/snapshot_blob.bin: snapshot_blob.bin
      node_modules/electron/dist/natives_blob.bin: natives_blob.bin
      node_modules/electron/dist/content_shell.pak: content_shell.pak
      node_modules/electron/dist/resources/* : resources
      node_modules/electron/dist/locales/* : locales
      app.asar: resources/app.asar
      node_modules/electron/dist/libnode.so: lib/x86_64-linux-gnu/libnode.so
      node_modules/electron-/dist/libffmpeg.so: lib/x86_64-linux-gnu/libffmpeg.so
    after: [desktop-gtk2]
